name: ğŸ“§ æ¯æ—¥çŸ¥è¯†æ¨é€

on:
  # å®šæ—¶è§¦å‘ï¼šæ¯å¤©åŒ—äº¬æ—¶é—´æ—©ä¸Š8ç‚¹ï¼ˆUTCæ—¶é—´0ç‚¹ï¼‰
  schedule:
    - cron: '0 0 * * *'
  
  # ä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼ˆç”¨äºæµ‹è¯•ï¼‰
  workflow_dispatch:

jobs:
  send-email:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      
      - name: ğŸ è®¾ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: |
          pip install markdown
      
      - name: ğŸ“§ å‘é€é‚®ä»¶
        env:
          SMTP_SERVER: smtp.qq.com
          SMTP_PORT: 465
          SMTP_USER: ${{ secrets.SMTP_USER }}
          SMTP_PASSWORD: ${{ secrets.SMTP_PASSWORD }}
          TO_EMAIL: ${{ secrets.TO_EMAIL }}
        run: |
          python scripts/send_email.py
      
      - name: âœ… å®Œæˆ
        run: |
          echo "é‚®ä»¶å‘é€å®Œæˆï¼"
          echo "å‘é€æ—¶é—´: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"
